define(["baseView","app"],function(n){"use strict";var t=function(){};return t.prototype.onMenuInitialized=function(){},t.prototype.Init=function(t){n.prototype.Init.call(this,t);var i=this;i.ActionFilters={};t.BaseMenuOptionItems=[];t.BaseMenuOption={onContentReady:function(n){i.onMenuInitialized(n)},bindingOptions:{dataSource:"BaseMenuOptionItems"},onItemClick:function(n){if(n.itemData.onItemClick!==undefined){n.itemData.onItemClick();return}i.onMenuItemClick(n)},itemTemplate:function(n,t,r){var f,e,u;return n.isActionFilter===!0?($(r).parent().parent().css("float","right"),$(r).parent().parent().addClass("jsContextMenuRight"),u=$('<div class="action-filter-container" style="float:right"><div class="action-filter-caption"><span class="'+(n.icon==undefined?"mdi mdi-filter":n.icon)+'"><\/span> '+(n.caption===undefined?"":n.caption)+"<\/div><\/div>"),i.ActionFilters===undefined&&(i.ActionFilters={}),i.ActionFilters[n.name]===undefined&&n.value!==undefined&&(i.ActionFilters==undefined&&(i.ActionFilters={}),i.ActionFilters[n.name]=n.value),f=null,n.searchEnabled=!0,n.SQL!==undefined?(f=new DevExpress.data.DataSource({load:function(t){var u=t.skip==undefined?0:t.skip,f=t.searchValue,s=t.searchExpr!=null?typeof t.searchExpr=="string"?t.searchExpr:t.searchExpr.join():null,e=i.$q.defer(),o={FilterExpr:f==null?undefined:"Name LIKE '%"+f+"%'"},r;return n.params!==undefined&&n.params!==null&&(o.params=$.isFunction(n.params)?n.params():n.params),r=null,$.isFunction(n.SQL)?(r=n.SQL(),console.log(r)):r=n.SQL,i.JSDataService.Query(r,o,u).then(function(t){t.collection==null&&(t.collection=[]);u===0&&n.defaultItems!==undefined&&n.defaultItems!==null&&$.each(n.defaultItems,function(n,i){t.collection.unshift(i)});e.resolve(t.collection)}),e.promise},byKey:function(t){var u=null,f,r,e;return(n.defaultItems!==undefined&&(u=Enumerable.From(n.defaultItems).Where("$.ID == "+t).ToArray()[0]),u!==null&&u!==undefined)?u:(f=i.$q.defer(),r=null,$.isFunction(n.SQL)?(r=n.SQL(),console.log(r)):r=n.SQL,e=null,n.params!==undefined&&n.params!==null&&(e=$.isFunction(n.params)?n.params():n.params),i.JSDataService.Query(r,{FilterExpr:"ID = "+t,params:e}).then(function(n){if(n.collection.length==0){f.resolve(null);return}f.resolve(n.collection[0])}),f.promise)}}),n.valueExpr="ID",n.displayExpr="Name"):f=n.dataSource,e=function(){f.load({searchOperation:"contains",searchValue:null,skip:0,take:20})},$('<div id="'+n.name+'" class="action-filter-box"><\/div>').dxSelectBox({dataSource:f,reload:e,placeholder:n.placeholder,searchEnabled:n.searchEnabled,valueExpr:n.valueExpr==undefined?"id":n.valueExpr,displayExpr:n.displayExpr==undefined?"name":n.displayExpr,width:n.width===undefined?"100px":n.width,value:i.ActionFilters[n.name]===undefined?n.value:i.ActionFilters[n.name],onInitialized:function(t){i[n.name]=t.component},onValueChanged:function(t){i.ActionFilters==undefined&&(i.ActionFilters={});i.ActionFilters[n.name]=t.value;i.OnFilterValueChanged(n.name,t)}}).appendTo(u),u):n.isActionDateRange===!0?($(r).parent().parent().css("float","right"),$(r).parent().parent().addClass("jsContextMenuRight"),u=$('<div class="action-filter-container"><div class="action-filter-caption"><span class="mdi mdi-calendar"><\/span> '+(n.caption===undefined?"":n.caption)+"<\/div><\/div>"),$('<div id="'+n.name+'"><\/div>').jDxDateRangeBox({value:n.value,onInit:function(t){i.ActionFilters==undefined&&(i.ActionFilters={});i.ActionFilters[n.name]=t},OnDateValueChanged:function(t){i.ActionFilters==undefined&&(i.ActionFilters={});i.ActionFilters[n.name]=t;i.OnFilterValueChanged(n.name,t)}}).appendTo(u),u):(n.align==="right"&&($(r).parent().parent().css("float","right"),$(r).parent().parent().addClass("jsContextMenuRight")),n.color===undefined&&n.color==null&&(n.color="#767676"),n.icon===undefined&&n.icon==null&&(n.icon="FontInSys"),n.text===undefined)?"<div class='JsContextMenu'><div class='icon-container' style='background:"+n.color+"'><span class='"+n.icon+"'><\/span><\/div><\/div>":"<div class='JsContextMenu' style='display:table-cell;vertical-align:middle;background:transparent'><div class='item-content'><span style='color:"+n.color+"' class='"+n.icon+"'><\/span> <div class='item-caption'>"+n.text+"<\/div><\/div>"}}},t.prototype.OnFilterValueChanged=function(){},t.prototype.onMenuItemClick=function(){},t});